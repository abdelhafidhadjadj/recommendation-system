# ============================================================
# CONFIGURATION GÉNÉRALE
# ============================================================
PROJECT_NAME=scientific-recommender
ENVIRONMENT=development

# ============================================================
# KAFKA
# ============================================================
KAFKA_BROKER=kafka:9092
KAFKA_BROKER_EXTERNAL=kafka:9092
ZOOKEEPER_HOST=zookeeper:2181

KAFKA_TOPIC_ARTICLES_RAW=articles.raw
KAFKA_TOPIC_ARTICLES_PROCESSED=articles.processed
KAFKA_TOPIC_ARTICLES_EMBEDDED=articles.embedded
KAFKA_TOPIC_USER_INTERACTIONS=users.interactions
KAFKA_TOPIC_USER_PROFILES=users.profiles
KAFKA_TOPIC_RECO_LOGS=recommendations.logs

# ============================================================
# APACHE SPARK
# ============================================================
SPARK_MASTER_URL=spark://spark-master:7077
SPARK_MASTER_HOST=spark-master
SPARK_MASTER_PORT=7077
SPARK_MASTER_WEBUI_PORT=8080
SPARK_WORKER_MEMORY=2g
SPARK_WORKER_CORES=2
SPARK_DRIVER_MEMORY=2g
SPARK_EXECUTOR_MEMORY=2g

# ============================================================
# HADOOP HDFS
# ============================================================
HDFS_NAMENODE_HOST=namenode
HDFS_NAMENODE_PORT=9000
HDFS_NAMENODE_HTTP_PORT=9870
HDFS_REPLICATION=1

# Chemins HDFS
HDFS_BRONZE_PATH=hdfs://namenode:9000/datalake/bronze
HDFS_SILVER_PATH=hdfs://namenode:9000/datalake/silver
HDFS_GOLD_PATH=hdfs://namenode:9000/datalake/gold
HDFS_MODELS_PATH=hdfs://namenode:9000/models
HDFS_CHECKPOINTS_PATH=hdfs://namenode:9000/checkpoints

# ============================================================
# POSTGRESQL
# ============================================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=recommender_db
POSTGRES_USER=recommender_user
POSTGRES_PASSWORD=recommender_pass_2025
POSTGRES_URL=postgresql://recommender_user:recommender_pass_2025@postgres:5432/recommender_db

# ============================================================
# MONGODB
# ============================================================
MONGO_HOST=mongodb
MONGO_PORT=27017
MONGO_DB=recommender_articles
MONGO_USER=mongo_user
MONGO_PASSWORD=mongo_pass_2025
MONGO_URL=mongodb://mongo_user:mongo_pass_2025@mongodb:27017/recommender_articles

# Collections MongoDB
MONGO_COLLECTION_RAW=articles_raw
MONGO_COLLECTION_ENRICHED=articles_enriched
MONGO_COLLECTION_PROFILES=user_profiles

# ============================================================
# ELASTICSEARCH
# ============================================================
ES_HOST=elasticsearch
ES_PORT=9200
ES_URL=http://elasticsearch:9200
ES_INDEX_ARTICLES=articles
ES_INDEX_USERS=users
ES_EMBEDDING_DIMS=768

# ============================================================
# REDIS
# ============================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis_pass_2025
REDIS_URL=redis://:redis_pass_2025@redis:6379/0

# TTL en secondes
REDIS_TTL_PROFILE=3600        # 1 heure
REDIS_TTL_RECO=1800           # 30 minutes
REDIS_TTL_SESSION=86400       # 24 heures
REDIS_TTL_ARTICLE_META=7200   # 2 heures

# ============================================================
# MODÈLES NLP / LLM
# ============================================================
# Choix du modèle : biobert | scibert | pubmedbert
DEFAULT_EMBEDDING_MODEL=biobert

BIOBERT_MODEL=dmis-lab/biobert-v1.1
SCIBERT_MODEL=allenai/scibert_scivocab_uncased
PUBMEDBERT_MODEL=microsoft/BiomedNLP-PubMedBERT-base-uncased-abstract-fulltext

# Dossier de cache des modèles HuggingFace
HF_CACHE_DIR=/app/models_cache
EMBEDDING_BATCH_SIZE=32
EMBEDDING_MAX_LENGTH=512

# GPU : true si disponible, false sinon (CPU uniquement)
USE_GPU=false

# ============================================================
# API FASTAPI
# ============================================================
API_HOST=0.0.0.0
API_PORT=8000
API_SECRET_KEY=super_secret_key_change_in_production_2025
API_ALGORITHM=HS256
API_ACCESS_TOKEN_EXPIRE_MINUTES=60
API_DEBUG=true

# ============================================================
# INTERFACE STREAMLIT
# ============================================================
STREAMLIT_PORT=8501
STREAMLIT_API_URL=http://api:8000

# ============================================================
# COLLECTEUR DE DONNÉES
# ============================================================
# PubMed E-utilities API (gratuit, pas besoin de clé pour usage limité)
PUBMED_BASE_URL=https://eutils.ncbi.nlm.nih.gov/entrez/eutils
PUBMED_API_KEY=
PUBMED_FETCH_INTERVAL_MINUTES=60
PUBMED_MAX_RESULTS_PER_QUERY=500

# arXiv API (gratuit, pas de clé)
ARXIV_BASE_URL=http://export.arxiv.org/api/query
ARXIV_FETCH_INTERVAL_MINUTES=120
ARXIV_MAX_RESULTS_PER_QUERY=200

# Domaines à surveiller
SEARCH_QUERIES=bioinformatics,genomics,deep learning genomics,protein structure prediction,CRISPR,RNA sequencing,variant calling,gene expression

# ============================================================
# ÉVALUATION
# ============================================================
EVAL_K_VALUES=5,10,20
EVAL_TEST_SPLIT=0.2
EVAL_RANDOM_SEED=100